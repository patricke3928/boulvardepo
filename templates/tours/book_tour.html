{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Book {{ tour.title }} - TravelBook Tours</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* { box-sizing: border-box; margin:0; padding:0; font-family: 'Poppins', sans-serif; }
body { height:100vh; color:white; background:#0a0a0a; overflow-x:hidden; }

header {
    position:fixed; top:0; left:0; width:100%; height:60px;
    background:rgba(0,0,0,0.85); display:flex; align-items:center; justify-content:space-between;
    padding:0 30px; z-index:10; box-shadow:0 4px 10px rgba(255,255,255,0.05);
}
header a.brand { color:white; text-decoration:none; font-size:1.5rem; font-weight:bold; }
header nav a { color:white; text-decoration:none; margin-left:20px; font-weight:600; transition:0.2s; }
header nav a:hover { color:#6d5691; }

main { display:flex; justify-content:center; align-items:center; min-height:100vh; padding-top:60px; }

.booking-card {
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(15px);
    padding:30px;
    border-radius:25px;
    max-width:450px;
    width:90%;
    box-shadow:0 15px 40px rgba(0,0,0,0.6);
    text-align:center;
}

.booking-card h2 { margin-bottom:15px; font-size:1.5rem; color:#fff; }
.booking-card p { margin-bottom:20px; color:#ccc; font-size:0.95rem; }

form label { display:block; margin-bottom:10px; font-size:0.9rem; color:#eee; text-align:left; }
form input, form select {
    width:100%;
    padding:12px;
    margin-top:3px;
    border:none;
    border-radius:12px;
    font-size:1rem;
    background: rgba(255,255,255,0.1);
    color: #fff;
    outline:none;
    transition:0.3s;
}
form input:focus { background: rgba(255,255,255,0.15); }

form button {
    width:100%;
    padding:12px;
    margin-top:15px;
    border:none;
    border-radius:15px;
    font-weight:bold;
    font-size:1rem;
    cursor:pointer;
    color:#fff;
    background: rgba(109,86,145,0.25);
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 20px rgba(109,86,145,0.4);
    transition: all 0.3s ease;
}
form button:hover {
    background: rgba(155,127,200,0.3);
    box-shadow: 0 12px 25px rgba(155,127,200,0.6);
    transform: translateY(-3px) scale(1.05);
}

#bg { position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:0; pointer-events:none; }

body::-webkit-scrollbar { width:10px; }
body::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius:5px; }
</style>
</head>
<body>

<canvas id="bg"></canvas>

<header>
    <a href="{% url 'tours:tour_list' %}" class="brand">TravelBook Tours</a>
    <nav>
        {% if user.is_authenticated %}
            <a href="{% url 'users:profile' %}">Profile</a>
            <a href="{% url 'users:logout' %}">Logout</a>
        {% else %}
            <a href="{% url 'users:login' %}">Login</a>
        {% endif %}
    </nav>
</header>

<main>
    <div class="booking-card">
        <h2>Book "{{ tour.title }}"</h2>
        <p>{{ tour.description|truncatewords:25 }}<br>Price: ${{ tour.price }}</p>

        <form method="POST">
            {% csrf_token %}
            <label>Check-in Date
                <input type="date" name="check_in" required>
            </label>
            <label>Check-out Date
                <input type="date" name="check_out" required>
            </label>
            <label>Guests
                <input type="number" name="guests" min="1" max="10" value="1" required>
            </label>
            <button type="submit">Confirm Booking</button>
        </form>
    </div>
</main>

<script>
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');

function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

const particles = [];
for (let i = 0; i < 100; i++) {
    particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 2 + 1,
        speedX: (Math.random() - 0.5) * 0.5,
        speedY: (Math.random() - 0.5) * 0.5,
        alpha: Math.random() * 0.5 + 0.2
    });
}

function animate() {
    ctx.fillStyle = 'rgba(10,10,10,0.1)';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    particles.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255,255,255,${p.alpha})`;
        ctx.fill();
        p.x += p.speedX;
        p.y += p.speedY;
        if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
        if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
    });
    requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
